<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Edge</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0a0e27, #1a1f3a);
            color: white;
            margin: 0;
            padding: 20px;
        }
        .btn {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div id="login" style="max-width: 400px; margin: 100px auto; text-align: center;">
    <h1>üèÄ NBA EDGE</h1>
    <button onclick="signIn()" class="btn">Sign in with Google</button>
</div>

<div id="app" style="display: none;">
    <h2>Signed in as: <span id="email"></span></h2>
    <button onclick="signOut()" class="btn">Sign Out</button>
    <div id="games" style="margin-top: 20px;"></div>
</div>

<script>
const config = {
    apiKey: "AIzaSyB8EmsdGFvQLRRWev3zM8wzSXXhgWjHeO4",
    authDomain: "nba-tracker-641f0.firebaseapp.com",
    databaseURL: "https://nba-tracker-641f0-default-rtdb.firebaseio.com",
    projectId: "nba-tracker-641f0",
    storageBucket: "nba-tracker-641f0.firebasestorage.app",
    messagingSenderId: "29717054876",
    appId: "1:29717054876:web:fc4bf3d1242967fe857459"
};

firebase.initializeApp(config);
const auth = firebase.auth();
const db = firebase.database();

function signIn() {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider).catch(() => auth.signInWithRedirect(provider));
}

function signOut() {
    auth.signOut();
}

auth.onAuthStateChanged(user => {
    if (user) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('app').style.display = 'block';
        document.getElementById('email').textContent = user.email;
        loadGames();
    } else {
        document.getElementById('login').style.display = 'block';
        document.getElementById('app').style.display = 'none';
    }
});

function loadGames() {
    db.ref('games').on('value', snap => {
        let html = '<h3>Games:</h3>';
        snap.forEach(child => {
            const g = child.val();
            html += `<div style="background: rgba(255,255,255,0.1); padding: 16px; margin: 8px 0; border-radius: 8px;">
                ${g.team} vs ${g.opponent} - Score: ${g.fitScore || 'N/A'}
            </div>`;
        });
        document.getElementById('games').innerHTML = html;
    });
}
</script>

</body>
</html>
